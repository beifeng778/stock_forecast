# OpenAI 兼容接口配置（可接 DeepSeek / 自建网关等）
# DeepSeek 示例：
# LLM_BASE_URL=https://api.deepseek.com
# LLM_AUTH_TOKEN=sk-your-api-key-here
LLM_BASE_URL=https://api.deepseek.com
LLM_AUTH_TOKEN=sk-your-api-key-here

# LLM 模型选择（OpenAI Chat Completions 兼容）
# 推荐使用普通模型如 deepseek-chat，不建议使用思考模型（如 deepseek-reasoner）
# 思考模型推理时间过长（1-5分钟），会导致超时和用户体验差
LLM_MODEL=deepseek-chat

# 蒸馏样本（sqlite）配置
# - 既可写目录（会自动拼接 llm_samples.db），也可写完整 db 文件路径
# - 不填写时后端默认使用容器内目录：/app/rag
# - 本地开发建议显式填写：../rag
LLM_SAMPLES_PATH=/app/rag
# TopK 相似样本数量（1-20）
LLM_SAMPLES_TOPK=3
# 样本时间衰减强度（每年衰减系数，越大越偏好近期样本）
LLM_SAMPLES_TIME_DECAY_PER_YEAR=6
# 开启样本调试日志（用于确认后端是否命中样本：会打印 db 路径、命中数与 sample_id 列表）
LLM_DEBUG_SAMPLES=false

# 服务端口
PORT=8080

# 验证码自动轮换周期（小时），默认1小时，设为0则仅启动时生成一次
CODE_ROTATE_HOURS=1

# 邮件通知配置（用于发送验证码更新通知）
# 163邮箱配置示例
SMTP_HOST=smtp.163.com
SMTP_PORT=465
SMTP_USER=your_email@163.com
SMTP_PASS=授权码（在163邮箱设置中获取，不是登录密码）
# 接收验证码的邮箱，多个邮箱用逗号分隔
NOTIFY_EMAILS=email1@163.com,email2@qq.com

# Redis配置
REDIS_ADDR=localhost:6379

# 股票缓存刷新配置
# 刷新时间（24小时制，格式：HH:MM）
STOCK_CACHE_REFRESH_TIME=04:00
# 刷新失败重试次数
STOCK_CACHE_RETRY_COUNT=3
# 重试间隔（分钟）
STOCK_CACHE_RETRY_INTERVAL=10
# 服务启动时是否立即执行一次（true/false）
STOCK_CACHE_REFRESH_ON_STARTUP=false

# 收盘后增量更新配置
# 是否启用收盘后增量更新（true/false）
POST_MARKET_UPDATE_ENABLED=true
# 收盘后更新时间（24小时制，格式：HH:MM），默认16:30
POST_MARKET_UPDATE_TIME=16:30
# 更新失败重试次数，默认3次
POST_MARKET_RETRY_COUNT=3
# 重试间隔（分钟），默认10分钟
POST_MARKET_RETRY_INTERVAL=10
# 服务启动时是否立即执行一次（true/false）
POST_MARKET_UPDATE_ON_STARTUP=false

# 前端刷新按钮配置
# 刷新按钮可用时间（24小时制，格式：HH:MM），默认17:00
# 说明：因为收盘后更新需要时间，所以前端刷新按钮的可用时间应晚于后端更新时间
FRONTEND_REFRESH_AVAILABLE_TIME=17:00

# 节假日配置文件路径
# 用于准确判断A股交易日（排除法定节假日）
# 默认值：holidays.json（相对于backend目录）
# 容器环境：/app/holidays.json
HOLIDAY_FILE=holidays.json
