# 中国节假日配置说明

## 概述

系统使用三层机制判断A股交易日：
1. **周末判断**：周六周日永远不交易（优先级最高）
2. **自定义配置**：从 `holidays.json` 文件加载节假日列表
3. **API判断**：调用第三方节假日API（http://timor.tech/api/holiday/info/{date}）
4. **默认逻辑**：API失败时，周一到周五默认为交易日

## 配置文件

### 文件位置

默认：`backend/holidays.json`

可通过环境变量自定义：
```bash
HOLIDAY_FILE=/path/to/holidays.json
```

### 文件格式

```json
{
  "holidays": [
    "2025-01-01",
    "2025-01-28",
    ...
  ]
}
```

### 示例

参考 `backend/holidays.json.example`，包含2025年所有法定节假日。

## 使用说明

### 1. 复制示例文件

```bash
cd backend
cp holidays.json.example holidays.json
```

### 2. 每年更新

每年国务院发布节假日安排后，更新 `holidays.json` 文件。

### 3. 不配置的影响

如果不配置 `holidays.json`，系统会：
- 自动调用API判断节假日
- API失败时，周一到周五默认为交易日（可能在节假日误判）

## 注意事项

1. **调休工作日**：A股周六周日永远不交易，即使是调休补班日，所以配置文件中不需要包含调休工作日
2. **缓存机制**：节假日判断结果会缓存24小时，减少API调用
3. **API超时**：API请求超时时间为3秒，失败后自动回退到默认逻辑

## 2025年节假日

已包含在 `holidays.json.example` 中：
- 元旦：1月1日
- 春节：1月28日-2月4日
- 清明节：4月4日-6日
- 劳动节：5月1日-5日
- 端午节：5月31日-6月2日
- 中秋节：10月6日
- 国庆节：10月1日-7日

## 2026年节假日

已包含在 `holidays.json.example` 中：
- 元旦：1月1日-3日
- 春节：2月17日-23日
- 清明节：4月4日-6日
- 劳动节：5月1日-5日
- 端午节：6月22日-24日
- 中秋节：9月27日
- 国庆节：10月1日-8日

## 故障排查

### 问题：节假日仍然显示为交易日

1. 检查 `holidays.json` 文件是否存在
2. 检查文件格式是否正确（JSON格式）
3. 检查日期格式是否为 `YYYY-MM-DD`
4. 查看后端日志，确认是否成功加载配置

### 问题：API调用失败

API失败不影响系统运行，会自动回退到默认逻辑。如果需要确保准确性，请配置 `holidays.json` 文件。
